<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="description" content="Budget Planner">
  <meta name="viewport" content="width=device-width, initial-scale=1.5">
  <title>C-ACE Budget Tool</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <script>
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
    import { getFirestore, collection, doc, Timestamp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js';
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBiky1i346MS8w-S9fwyxvQ4zVy_Y3pSnY",
      authDomain: "playground-f462b.firebaseapp.com",
      projectId: "playground-f462b",
      storageBucket: "playground-f462b.firebasestorage.app",
      messagingSenderId: "1034492625686",
      appId: "1:1034492625686:web:30462a74efd373f3934637",
    };


    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
  </script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').then(registration => {
        console.log('Service Worker registered with scope:', registration.scope);
      }).catch(error => {
        console.log('Service Worker registration failed:', error);
      });
    }
  </script>

  <!-- <script src="app.js" defer></script> -->
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CBX7MYS8PL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-CBX7MYS8PL');
</script>

<body>
  <header>
    <h1>Kakeibo Budget</h1>
    <div>
      <label for="monthSelect">Select Month:</label>
      <select id="monthSelect" aria-label="Select Month"></select>
    </div>
  </header>

  <div id="summary">
    <section id="balance">
      <h2>Balance</h2>
      <div id="balanceAm">$0</div>
    </section>

    <section id="income">
      <h2>Income</h2>
      <div id="incomeAm">$0</div>
    </section>

    <section id="expense">
      <h2>Expense</h2>
      <div id="expenseAm">$0</div>
    </section>
  </div>
  <div>
    <!-- New Test Button -->
    <button id="testBtn" onclick="addTestDataToFirebase()">Test</button>
  </div>


  <section id="entries">
    <div class="entry-card" id="listCard">
      <h2>Entries</h2>
      <div id="list"></div>
    </div>

    <div class="entry-card">
      <button id="newIncomeBtn" onclick="bdg.toggleIncome(true)" aria-label="Create a new income">New Income</button>
      <div id="listIncome"></div>
      <section id="incomeForm" aria-labelledby="incomeFormTitle" class="hidden">
        <h2 id="incomeFormTitle">Income Form</h2>
        <form onsubmit="return bdg.saveIncome()">
          <button id="incomeFormEnd" onclick="bdg.toggleIncome(false)" aria-label="Close Form">X</button>
          <input type="hidden" id="incomeFormID">
          <label for="incomeFormSource">Income Source</label>
          <input type="text" id="incomeFormSource" aria-label="Income Source" required>
          <label for="incomeFormAmt">Amount</label>
          <input type="number" id="incomeFormAmt" step="0.01" required>
          <button type="submit" id="incomeFormGo" aria-label="Save Income">Save</button>
        </form>
      </section>
    </div>

    <div class="entry-card">
      <button id="newExpenseBtn" onclick="bdg.toggleExpense(true)" aria-label="Create a new expense">New
        Expense</button>
      <div id="listExpense"></div>
      <section id="expenseForm" aria-labelledby="expenseFormTitle" class="hidden">
        <h2 id="expenseFormTitle">Expense Form</h2>
        <form onsubmit="return bdg.saveExpense()">
          <button id="expenseFormEnd" onclick="bdg.toggleExpense(false)" aria-label="Close Form">X</button>
          <input type="hidden" id="expenseFormID">
          <label for="expenseFormTxt">Description</label>
          <input type="text" id="expenseFormTxt" required>
          <label for="expenseFormAmt">Amount</label>
          <input type="number" id="expenseFormAmt" step="0.01" required>
          <label for="expenseFormCategory">Category</label>
          <select id="expenseFormCategory" required>
            <option value="needs">Needs</option>
            <option value="wants">Wants</option>
            <option value="culture">Culture</option>
            <option value="unexpected">Unexpected</option>
          </select>
          <button type="submit" id="expenseFormGo" aria-label="Save Expense">Save</button>
        </form>
      </section>
    </div>
  </section>
  <script type="module" src="app.js"></script>
</body>

</html>